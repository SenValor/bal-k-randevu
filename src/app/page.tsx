'use client';

import { useState, useEffect, useRef } from 'react';
import Image from 'next/image';
import Link from 'next/link';
import { db } from '@/lib/firebase';
import { collection, addDoc, query, where, getDocs, onSnapshot, serverTimestamp } from 'firebase/firestore';

export default function Home() {
  const [selectedSeats, setSelectedSeats] = useState<string[]>([]);
  const [bubbles, setBubbles] = useState<Array<{id: number, size: number, left: number, delay: number}>>([]);
  const [selectedDate, setSelectedDate] = useState<string>('');
  const [selectedTime, setSelectedTime] = useState<string>('');
  const [guestCount, setGuestCount] = useState<number>(1);
  const [currentImageIndex, setCurrentImageIndex] = useState<number>(0);
  const [showPersonalInfoForm, setShowPersonalInfoForm] = useState<boolean>(false);
  const [currentMonth, setCurrentMonth] = useState<Date>(new Date());
  const [guestInfos, setGuestInfos] = useState<Array<{
    name: string;
    surname: string;
    gender: string;
    phone: string;
    age: string;
  }>>([]);
  const [isPrivateTour, setIsPrivateTour] = useState<boolean>(false);
  const [showPaymentModal, setShowPaymentModal] = useState<boolean>(false);
  const [paymentCompleted, setPaymentCompleted] = useState<boolean>(false);
  const [reservationConfirmed, setReservationConfirmed] = useState<boolean>(false);
  const [occupiedSeats, setOccupiedSeats] = useState<string[]>([]);
  const [loading, setLoading] = useState<boolean>(false);
  const [calendarOccupancy, setCalendarOccupancy] = useState<{[key: string]: {morning: number, afternoon: number}}>({});

  // Scroll Referanslarƒ±
  const rezervasyonRef = useRef<HTMLDivElement>(null);
  const tarihRef = useRef<HTMLDivElement>(null);
  const saatRef = useRef<HTMLDivElement>(null);
  const koltukRef = useRef<HTMLDivElement>(null);
  const ozetRef = useRef<HTMLDivElement>(null);

  // Smooth scroll fonksiyonu
  const scrollToSection = (ref: React.RefObject<HTMLDivElement | null>, offset = 80) => {
    if (ref.current) {
      const elementPosition = ref.current.offsetTop;
      const offsetPosition = elementPosition - offset;
      
      window.scrollTo({
        top: offsetPosition,
        behavior: 'smooth'
      });
    }
  };

  // Ki≈üi sayƒ±sƒ± deƒüi≈ütirme fonksiyonu - Artƒ±k scroll yapmƒ±yor
  const handleGuestCountChange = (newCount: number) => {
    setGuestCount(newCount);
    
    // Se√ßili koltuk sayƒ±sƒ± yeni ki≈üi sayƒ±sƒ±ndan fazlaysa, fazla olanlarƒ± √ßƒ±kar
    if (selectedSeats.length > newCount) {
      setSelectedSeats(selectedSeats.slice(0, newCount));
    }
  };

  // Tarih se√ßildiƒüinde uygun b√∂l√ºme kay
  useEffect(() => {
    if (selectedDate) {
      if (isPrivateTour) {
        // √ñzel turda direkt koltuk b√∂l√ºm√ºne git
        setTimeout(() => scrollToSection(koltukRef, 50), 800);
      } else {
        // Normal rezervasyonda saat se√ßimine git
        setTimeout(() => scrollToSection(saatRef, 120), 800);
      }
    }
  }, [selectedDate, isPrivateTour]);

  // Saat se√ßildiƒüinde koltuk b√∂l√ºm√ºne kay (sadece normal rezervasyonlarda)
  useEffect(() => {
    if (selectedTime && !isPrivateTour) {
      setTimeout(() => scrollToSection(koltukRef, 50), 800);
    }
  }, [selectedTime, isPrivateTour]);

  // Koltuk se√ßimi i√ßin scroll kontrol√º - sadece manual koltuk se√ßiminde √ßalƒ±≈üƒ±r
  const [lastSeatAction, setLastSeatAction] = useState<'add' | 'remove' | null>(null);
  
  useEffect(() => {
    // Sadece manuel koltuk se√ßimi/√ßƒ±karma i≈üleminden sonra scroll yap
    if (lastSeatAction && selectedSeats.length === guestCount && guestCount > 0 && selectedSeats.length > 0) {
      setTimeout(() => scrollToSection(ozetRef, 80), 1000);
    }
    setLastSeatAction(null); // Flag'i sƒ±fƒ±rla
  }, [selectedSeats, lastSeatAction, guestCount]);

  // Bubble efekti i√ßin
  useEffect(() => {
    const newBubbles = Array.from({ length: 6 }, (_, i) => ({
      id: i,
      size: Math.random() * 60 + 20,
      left: Math.random() * 100,
      delay: Math.random() * 8
    }));
    setBubbles(newBubbles);
  }, []);

  // G√∂rsel rotasyonu i√ßin
  useEffect(() => {
    const interval = setInterval(() => {
      setCurrentImageIndex((prev) => (prev + 1) % 10);
    }, 3000);
    return () => clearInterval(interval);
  }, []);

  // Tarih ve saat se√ßildiƒüinde dolu koltuklarƒ± √ßek ve real-time dinle
  useEffect(() => {
    if (selectedDate && selectedTime) {
      // ƒ∞lk veriyi √ßek
      fetchOccupiedSeats(selectedDate, selectedTime);

      // Real-time listener kurarak admin onaylarƒ± anƒ±nda g√∂ster
      if (process.env.NODE_ENV === 'development') {
        console.log('üîç Real-time listener kuruluyor:', { selectedDate, selectedTime });
      }
      
      const q = query(
        collection(db, 'reservations'),
        where('selectedDate', '==', selectedDate),
        where('selectedTime', '==', selectedTime),
        where('status', 'in', ['pending', 'confirmed'])
      );

      const unsubscribe = onSnapshot(q, (snapshot) => {
        const occupied: string[] = [];
        
        snapshot.forEach((doc) => {
          const data = doc.data();
          // Koltuk bilgilerini al
          if (data.selectedSeats && Array.isArray(data.selectedSeats)) {
            occupied.push(...data.selectedSeats);
          }
          
          // √ñzel tur ise t√ºm koltuklarƒ± dolu yap
          if (data.isPrivateTour) {
            const allSeats = ['IS1', 'IS2', 'IS3', 'IS4', 'IS5', 'IS6', 'SA1', 'SA2', 'SA3', 'SA4', 'SA5', 'SA6'];
            allSeats.forEach(seat => {
              if (!occupied.includes(seat)) {
                occupied.push(seat);
              }
            });
          }
        });
        
        setOccupiedSeats(occupied);
        
        // Debug log - sadece development ortamƒ±nda
        if (process.env.NODE_ENV === 'development') {
          console.log(`üîÑ [${new Date().toLocaleTimeString('tr-TR')}] Real-time g√ºncelleme:`, {
            tarih: selectedDate,
            saat: selectedTime,
            doluKoltuklar: occupied,
            toplamRezervasyon: snapshot.size,
            rezervasyonlar: snapshot.docs.map(doc => ({
              id: doc.id,
              status: doc.data().status,
              koltuklar: doc.data().selectedSeats,
              ozelTur: doc.data().isPrivateTour
            }))
          });
        }
      }, (error) => {
        console.error('Real-time listener hatasƒ±:', error);
      });

      // Cleanup fonksiyonu
      return () => unsubscribe();
    } else {
      setOccupiedSeats([]);
    }
  }, [selectedDate, selectedTime]);

  // Takvim doluluk durumunu hesapla
  const fetchCalendarOccupancy = async (month: Date) => {
    try {
      const year = month.getFullYear();
      const monthIndex = month.getMonth();
      
      // O ayƒ±n ba≈üƒ± ve sonu
      const startOfMonth = new Date(year, monthIndex, 1).toISOString().split('T')[0];
      const endOfMonth = new Date(year, monthIndex + 1, 0).toISOString().split('T')[0];
      
      if (process.env.NODE_ENV === 'development') {
        console.log('üìÖ Takvim doluluk hesaplanƒ±yor:', { startOfMonth, endOfMonth });
      }
      
      // Basitle≈ütirilmi≈ü query - sadece tarih aralƒ±ƒüƒ± (index gerektirmiyor)
      const q = query(
        collection(db, 'reservations'),
        where('selectedDate', '>=', startOfMonth),
        where('selectedDate', '<=', endOfMonth)
      );
      
      const querySnapshot = await getDocs(q);
      const occupancy: {[key: string]: {morning: number, afternoon: number}} = {};
      
      querySnapshot.forEach((doc) => {
        const data = doc.data();
        
        // Client-side filtering: sadece pending ve confirmed rezervasyonlarƒ± al
        if (data.status !== 'pending' && data.status !== 'confirmed') {
          return;
        }
        
        const dateKey = data.selectedDate;
        
        if (!occupancy[dateKey]) {
          occupancy[dateKey] = { morning: 0, afternoon: 0 };
        }
        
        const timeSlot = data.selectedTime === '07:00-13:00' ? 'morning' : 'afternoon';
        
        if (data.isPrivateTour) {
          // √ñzel tur ise t√ºm 12 koltuk dolu
          occupancy[dateKey][timeSlot] = 12;
        } else {
          // Normal rezervasyon - koltuk sayƒ±sƒ±nƒ± ekle
          const seatCount = data.selectedSeats ? data.selectedSeats.length : 0;
          occupancy[dateKey][timeSlot] += seatCount;
        }
      });
      
      setCalendarOccupancy(occupancy);
      
      if (process.env.NODE_ENV === 'development') {
        console.log('üìä Takvim doluluk hesaplandƒ±:', occupancy);
      }
    } catch (error) {
      console.error('Takvim doluluk hesaplanamadƒ±:', error);
    }
  };

  // Takvim ayƒ± deƒüi≈ütiƒüinde doluluk durumunu √ßek
  useEffect(() => {
    fetchCalendarOccupancy(currentMonth);
  }, [currentMonth]);

     // G√ºn√ºn doluluk durumunu hesapla (0-12 arasƒ±)
   const getDayOccupancy = (dateStr: string) => {
     const dayData = calendarOccupancy[dateStr];
     if (!dayData) return { total: 0, percentage: 0, morning: 0, afternoon: 0 };
     
     const morning = dayData.morning || 0;
     const afternoon = dayData.afternoon || 0;
     const total = morning + afternoon;
     const maxCapacity = 24; // 12 sabah + 12 √∂ƒüleden sonra
     const percentage = Math.round((total / maxCapacity) * 100);
     
     return { total, percentage, morning, afternoon };
   };

  // G√ºn√ºn rengini hesapla
  const getDayColor = (dateStr: string, isCurrentMonth: boolean, isDisabled: boolean) => {
    if (isDisabled || !isCurrentMonth) {
      return 'text-gray-400';
    }
    
    const { percentage } = getDayOccupancy(dateStr);
    
    if (percentage === 0) {
      return 'text-slate-700'; // Bo≈ü - normal
    } else if (percentage < 50) {
      return 'text-orange-600 bg-orange-50'; // Az dolu - turuncu
    } else if (percentage < 100) {
      return 'text-red-600 bg-red-50'; // √áoƒüunlukla dolu - kƒ±rmƒ±zƒ±
    } else {
      return 'text-white bg-red-600'; // Tamamen dolu - koyu kƒ±rmƒ±zƒ±
    }
  };

  // Ger√ßek tekne koltuk d√ºzeni - ƒ∞skele (Sol) ve Sancak (Saƒü)
  const iskeleSeat = ['IS1', 'IS2', 'IS3', 'IS4', 'IS5', 'IS6'];
  const sancakSeat = ['SA1', 'SA2', 'SA3', 'SA4', 'SA5', 'SA6'];

  // Takvim i≈ülevleri
  const getCalendarDays = (month: Date) => {
    const year = month.getFullYear();
    const monthIndex = month.getMonth();
    
    // Ayƒ±n ilk g√ºn√º
    const firstDay = new Date(year, monthIndex, 1);
    // Ayƒ±n son g√ºn√º
    const lastDay = new Date(year, monthIndex + 1, 0);
    // Ayƒ±n ka√ß g√ºn olduƒüu
    const daysInMonth = lastDay.getDate();
    // Ayƒ±n ilk g√ºn√º hangi g√ºn (0=Pazar, 1=Pazartesi...)
    const startingDayOfWeek = (firstDay.getDay() + 6) % 7; // Pazartesi=0 olacak ≈üekilde ayarla
    
    const days = [];
    const today = new Date();
    const todayStr = today.toISOString().split('T')[0];
    
    // √ñnceki ayƒ±n son g√ºnlerini ekle
    const prevMonth = new Date(year, monthIndex - 1, 0);
    for (let i = startingDayOfWeek - 1; i >= 0; i--) {
      const day = prevMonth.getDate() - i;
      const date = new Date(year, monthIndex - 1, day);
      days.push({
        day,
        date: date.toISOString().split('T')[0],
        isCurrentMonth: false,
        isToday: false,
        isPast: date < today,
        isDisabled: true
      });
    }
    
    // Bu ayƒ±n g√ºnlerini ekle
    for (let day = 1; day <= daysInMonth; day++) {
      const date = new Date(year, monthIndex, day);
      const dateStr = date.toISOString().split('T')[0];
      days.push({
        day,
        date: dateStr,
        isCurrentMonth: true,
        isToday: dateStr === todayStr,
        isPast: date < today,
        isDisabled: date < today
      });
    }
    
    // Sonraki ayƒ±n ilk g√ºnlerini ekle (42 g√ºn olacak ≈üekilde - 6 hafta)
    const remainingSlots = 42 - days.length;
    for (let day = 1; day <= remainingSlots; day++) {
      const date = new Date(year, monthIndex + 1, day);
      days.push({
        day,
        date: date.toISOString().split('T')[0],
        isCurrentMonth: false,
        isToday: false,
        isPast: false,
        isDisabled: true
      });
    }
    
    return days;
  };

  const nextMonth = () => {
    setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1, 1));
  };

  const prevMonth = () => {
    const today = new Date();
    const newMonth = new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1, 1);
    // Ge√ßmi≈ü aylara gitmeyi engelle
    if (newMonth >= new Date(today.getFullYear(), today.getMonth(), 1)) {
      setCurrentMonth(newMonth);
    }
  };

  const calendarDays = getCalendarDays(currentMonth);

  // Mevcut saatler
  const availableTimes = [
    '07:00-13:00', '14:00-20:00'
  ];

  const getSeatStatus = (seat: string) => {
    if (occupiedSeats.includes(seat)) return 'occupied';
    if (selectedSeats.includes(seat)) return 'selected';
    return 'available';
  };

  const getSeatColor = (status: string) => {
    switch (status) {
      case 'occupied': return 'bg-gradient-to-br from-red-500 to-red-600 border-red-600 cursor-not-allowed';
      case 'selected': return 'bg-gradient-to-br from-green-400 to-green-600 border-green-600 shadow-xl scale-110 neon-glow';
      case 'available': return 'bg-gradient-to-br from-blue-400 to-blue-600 border-blue-600 hover:from-blue-500 hover:to-blue-700 hover:scale-110 shadow-lg hover:shadow-xl';
      default: return 'bg-gray-300 border-gray-400';
    }
  };

  const renderSeat = (seatId: string) => {
    const isOccupied = occupiedSeats.includes(seatId);
    const isSelected = selectedSeats.includes(seatId);
    const canSelect = !isOccupied && (!isSelected && selectedSeats.length < guestCount || isSelected);
    
    return (
      <button
        key={seatId}
        onClick={() => {
          // √ñzel turda koltuk se√ßimi yapƒ±lamaz
          if (isPrivateTour) return;
          
          if (!isOccupied) {
            if (isSelected) {
              // Koltuk zaten se√ßili, √ßƒ±kar
              setLastSeatAction('remove');
              setSelectedSeats(selectedSeats.filter(seat => seat !== seatId));
            } else if (selectedSeats.length < guestCount) {
              // Yeni koltuk ekle (ki≈üi sayƒ±sƒ± limitine kadar)
              setLastSeatAction('add');
              setSelectedSeats([...selectedSeats, seatId]);
            }
          }
        }}
        disabled={isOccupied || isPrivateTour}
        className={`w-10 h-10 rounded-xl flex items-center justify-center text-white text-sm font-bold transition-all duration-300 shadow-lg border-2 ${getSeatColor(getSeatStatus(seatId))} ${
          (!canSelect && !isOccupied && !isSelected) || isPrivateTour ? 'opacity-50 cursor-not-allowed' : ''
        }`}
        title={
          isPrivateTour
            ? '√ñzel turda t√ºm koltuklar otomatik se√ßilmi≈ütir'
            : isOccupied 
            ? 'Bu koltuk dolu' 
            : isSelected 
            ? 'Se√ßimi kaldƒ±rmak i√ßin tƒ±klayƒ±n'
            : selectedSeats.length >= guestCount
            ? `Maksimum ${guestCount} koltuk se√ßebilirsiniz`
            : 'Koltuƒüu se√ßmek i√ßin tƒ±klayƒ±n'
        }
      >
        <div className="relative">
          <span className="relative z-10">{seatId.slice(-1)}</span>
          {/* Koltuk g√∂lgesi */}
          <div className="absolute -bottom-0.5 left-1/2 transform -translate-x-1/2 w-6 h-0.5 bg-black/30 rounded-full"></div>
        </div>
      </button>
    );
  };

  const isReservationComplete = selectedSeats.length === guestCount && selectedDate && 
    (isPrivateTour || selectedTime) && guestCount > 0;
  
  // Ki≈üi bilgileri formunu hazƒ±rla
  const initializeGuestInfos = () => {
    // √ñzel turda sadece 1 ki≈üi (yetkili/organizat√∂r) bilgisi gerekli
    const personCount = isPrivateTour ? 1 : guestCount;
    
    const infos = Array.from({ length: personCount }, () => ({
      name: '',
      surname: '',
      gender: '',
      phone: '',
      age: ''
    }));
    setGuestInfos(infos);
    setShowPersonalInfoForm(true);
  };

  // Ki≈üi bilgileri tamamlandƒ± mƒ± kontrol et
  const expectedPersonCount = isPrivateTour ? 1 : guestCount;
  const isPersonalInfoComplete = guestInfos.length === expectedPersonCount && 
    guestInfos.every(info => info.name && info.surname && info.gender && info.phone && info.age);

  // IBAN bilgileri
  const bankInfo = {
    iban: "TR98 0006 4000 0011 2345 6789 01",
    accountHolder: "Balƒ±k Sefasƒ± Tekne Turizm",
    bankName: "T√ºrkiye ƒ∞≈ü Bankasƒ±"
  };

  // Clipboard'a kopyalama fonksiyonu
  const copyToClipboard = async (text: string, type: string) => {
    try {
      await navigator.clipboard.writeText(text);
      // Ba≈üarƒ± mesajƒ± g√∂ster (basit alert, sonra toast eklenebilir)
      alert(`${type} kopyalandƒ±!`);
    } catch (err) {
      console.error('Kopyalama hatasƒ±:', err);
      alert('Kopyalama ba≈üarƒ±sƒ±z!');
    }
  };

  // Firebase'den se√ßili tarih ve saat i√ßin dolu koltuklarƒ± √ßek
  const fetchOccupiedSeats = async (date: string, time: string) => {
    if (!date || !time) return;
    
    try {
      const q = query(
        collection(db, 'reservations'),
        where('selectedDate', '==', date),
        where('selectedTime', '==', time),
        where('status', 'in', ['pending', 'confirmed']) // Bekleyen ve onaylanmƒ±≈ü rezervasyonlar
      );
      
      const querySnapshot = await getDocs(q);
      const occupied: string[] = [];
      
      querySnapshot.forEach((doc) => {
        const data = doc.data();
        // Koltuk bilgilerini al
        if (data.selectedSeats && Array.isArray(data.selectedSeats)) {
          occupied.push(...data.selectedSeats);
        }
        
        // √ñzel tur ise t√ºm koltuklarƒ± dolu yap
        if (data.isPrivateTour) {
          const allSeats = ['IS1', 'IS2', 'IS3', 'IS4', 'IS5', 'IS6', 'SA1', 'SA2', 'SA3', 'SA4', 'SA5', 'SA6'];
          allSeats.forEach(seat => {
            if (!occupied.includes(seat)) {
              occupied.push(seat);
            }
          });
        }
      });
      
      setOccupiedSeats(occupied);
      
      if (process.env.NODE_ENV === 'development') {
        console.log(`${date} ${time} i√ßin dolu koltuklar:`, occupied); // Debug i√ßin
      }
    } catch (error) {
      console.error('Dolu koltuklar √ßekilemedi:', error);
    }
  };

  // Rezervasyonu Firebase'e kaydet
  const saveReservation = async () => {
    setLoading(true);
    try {
      const reservationData = {
        guestCount,
        selectedDate,
        selectedTime,
        selectedSeats,
        isPrivateTour,
        guestInfos,
        // √ñzel tur i√ßin grup lideri notu ekle
        ...(isPrivateTour && {
          note: '√ñzel tur - Girilen bilgiler grup lideri/yetkili ki≈üiye aittir. Toplam 12 ki≈üi i√ßin t√ºm tekne kiralanmƒ±≈ütƒ±r.'
        }),
        status: 'pending',
        paymentStatus: 'waiting',
        createdAt: serverTimestamp()
      };

      await addDoc(collection(db, 'reservations'), reservationData);
      setShowPaymentModal(true);
    } catch (error) {
      console.error('Rezervasyon kaydedilemedi:', error);
      alert('Rezervasyon sƒ±rasƒ±nda bir hata olu≈ütu. L√ºtfen tekrar deneyin.');
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="min-h-screen relative wave-bg">
      {/* Bubble Animation */}
      <div className="bubbles">
        {bubbles.map((bubble) => (
          <div
            key={bubble.id}
            className="bubble"
            style={{
              width: `${bubble.size}px`,
              height: `${bubble.size}px`,
              left: `${bubble.left}%`,
              animationDelay: `${bubble.delay}s`
            }}
          />
        ))}
      </div>

      {/* Header */}
      <header className="glass-header sticky top-0 z-50 backdrop-blur-xl border-b border-white/10">
        <div className="px-4 py-3">
          <div className="flex items-center justify-between">
            {/* Logo ve Ba≈ülƒ±k */}
            <div className="flex items-center space-x-4">
              <div className="relative group">
                <div className="w-14 h-14 bg-gradient-to-br from-blue-400 via-blue-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-xl floating group-hover:shadow-2xl transition-all duration-300">
                  <span className="text-white font-bold text-2xl">üêü</span>
                </div>
                <div className="absolute -top-1 -right-1 w-5 h-5 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full animate-pulse shadow-lg">
                  <div className="absolute inset-1 bg-white rounded-full"></div>
                </div>
                {/* ≈ûƒ±k √ßember efekti */}
                <div className="absolute inset-0 rounded-2xl bg-gradient-to-br from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              </div>
              <div>
                <h1 className="text-xl font-bold bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-800 bg-clip-text text-transparent">
                  Balƒ±k Sefasƒ±
                </h1>
                <div className="flex items-center space-x-1">
                  <span className="text-xs text-slate-600 font-medium">üåä Tekne Kiralama & Balƒ±k Avƒ±</span>
                  <div className="w-1 h-1 bg-blue-400 rounded-full animate-pulse"></div>
                </div>
              </div>
            </div>

            {/* ƒ∞leti≈üim Butonlarƒ± */}
            <div className="flex items-center space-x-3">
              {/* Gizli Admin Linki */}
              <Link 
                href="/admin"
                className="opacity-30 hover:opacity-100 transition-all duration-300"
                title="Admin Panel"
              >
                <div className="w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center">
                  <span className="text-gray-600 text-xs">üéõÔ∏è</span>
                </div>
              </Link>
              {/* WhatsApp Butonu */}
              <a 
                href="https://wa.me/905310892537?text=Merhaba, tekne kiralama hakkƒ±nda bilgi almak istiyorum." 
                target="_blank"
                rel="noopener noreferrer"
                className="group relative bg-gradient-to-r from-green-500 to-green-600 text-white p-3 rounded-full hover:from-green-600 hover:to-green-700 active:scale-95 shadow-lg hover:shadow-xl transition-all duration-300"
              >
                <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.785"/>
                </svg>
                
                {/* Tooltip */}
                <div className="absolute -bottom-12 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap">
                  WhatsApp ile ileti≈üim
                </div>
                
                {/* ≈ûƒ±k parlaklƒ±k efekti */}
                <div className="absolute inset-0 rounded-full bg-gradient-to-r from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              </a>

              {/* Telefon Butonu */}
              <a 
                href="tel:05310892537" 
                className="group relative bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-3 rounded-full text-sm font-bold hover:from-blue-600 hover:to-blue-700 active:scale-95 shadow-lg hover:shadow-xl transition-all duration-300 flex items-center space-x-2"
              >
                <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                </svg>
                <span className="hidden sm:inline">Ara</span>
                
                {/* Tooltip mobil i√ßin */}
                <div className="absolute -bottom-12 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap sm:hidden">
                  Hemen ara
                </div>
                
                {/* ≈ûƒ±k parlaklƒ±k efekti */}
                <div className="absolute inset-0 rounded-full bg-gradient-to-r from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              </a>
            </div>
          </div>
        </div>

        {/* ≈ûƒ±k alt √ßizgi efekti */}
        <div className="absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-blue-500/30 to-transparent"></div>
      </header>

      {/* Hero Section */}
      <section className="px-4 py-8 relative z-10">
        <div className="text-center mb-8">
          <h2 className="text-3xl font-bold text-white mb-4 floating">
            üåä Denizde Balƒ±k Avƒ± Keyfi
          </h2>
          <p className="text-white/90 leading-relaxed text-sm backdrop-blur-sm bg-white/10 rounded-xl p-4 border border-white/20 mb-6">
            ƒ∞stanbul Sarƒ±yer'de profesyonel balƒ±k√ßƒ± teknesi kiralama. 
            Konforlu koltuklar, deneyimli kaptan ve g√ºvenli yolculuk.
          </p>
          
          {/* Rezervasyona Ba≈üla Butonu */}
          <button
            onClick={() => scrollToSection(rezervasyonRef, 100)}
            className="bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-600 text-white px-8 py-4 rounded-full font-bold text-lg hover:from-blue-600 hover:via-blue-700 hover:to-indigo-700 active:scale-95 shadow-2xl hover:shadow-3xl transition-all duration-300 shimmer floating"
          >
            üöÄ Rezervasyona Ba≈üla
          </button>
          <p className="text-white/80 text-xs mt-2 animate-pulse">
            ‚¨áÔ∏è Adƒ±m adƒ±m rezervasyon s√ºrecine ba≈ülayƒ±n
          </p>
        </div>

        {/* Tekne G√∂rselleri */}
        <div className="glass-card p-6 mb-6 hover-lift">
          <h3 className="text-lg font-bold mb-4 text-center">
            <span className="bg-white/90 px-4 py-2 rounded-full shadow-lg text-slate-800">
              üì∏ Teknemiz
            </span>
          </h3>
          
          {/* Ana G√∂rsel */}
          <div className="relative mb-4 rounded-2xl overflow-hidden shadow-xl">
            <div className="aspect-[16/9] relative">
              <Image
                src={`/tekne-gorseller/tekne-${currentImageIndex + 1}.jpg`}
                alt={`Balƒ±k Sefasƒ± Tekne G√∂rsel ${currentImageIndex + 1}`}
                fill
                className="object-cover"
                priority={currentImageIndex === 0}
              />
              <div className="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"></div>
            </div>
            <div className="absolute top-4 right-4 bg-black/70 text-white px-3 py-1 rounded-full text-xs font-bold">
              {currentImageIndex + 1} / 10
            </div>
            <div className="absolute bottom-4 left-4 text-white">
              <div className="text-lg font-bold drop-shadow-lg">Balƒ±k Sefasƒ± Teknesi</div>
              <div className="text-sm opacity-90 drop-shadow-lg">Profesyonel Balƒ±k Avƒ± Turu</div>
            </div>
          </div>

          {/* K√º√ß√ºk G√∂rseller Grid */}
          <div className="grid grid-cols-5 gap-2">
            {Array.from({ length: 10 }, (_, i) => (
              <button
                key={i}
                onClick={() => setCurrentImageIndex(i)}
                className={`aspect-square rounded-lg overflow-hidden transition-all duration-300 relative ${
                  currentImageIndex === i 
                    ? 'ring-3 ring-blue-400 scale-105 shadow-xl' 
                    : 'hover:scale-105 shadow-lg'
                }`}
              >
                <Image
                  src={`/tekne-gorseller/tekne-${i + 1}.jpg`}
                  alt={`Tekne G√∂rsel ${i + 1}`}
                  fill
                  className="object-cover"
                  sizes="(max-width: 768px) 20vw, 10vw"
                />
                <div className="absolute inset-0 bg-black/20 hover:bg-black/10 transition-all duration-300"></div>
                <div className="absolute top-1 right-1 bg-black/70 text-white px-1.5 py-0.5 rounded text-xs font-bold">
                  {i + 1}
                </div>
                {currentImageIndex === i && (
                  <div className="absolute inset-0 flex items-center justify-center">
                    <div className="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center">
                      <span className="text-white text-xs">‚úì</span>
                    </div>
                  </div>
                )}
              </button>
            ))}
          </div>
        </div>

        {/* Rezervasyon Bilgileri */}
        <div ref={rezervasyonRef} className="glass-card p-6 mb-6 hover-lift">
          <h3 className="text-lg font-bold mb-6 text-center">
            <span className="bg-white/90 px-4 py-2 rounded-full shadow-lg text-slate-800">
              üìÖ Rezervasyon Bilgileri
            </span>
          </h3>

          {/* Ki≈üi Sayƒ±sƒ± */}
          <div className="mb-6">
            <label className="block text-sm font-bold text-slate-800 mb-3 bg-white/80 px-3 py-1 rounded-full inline-block">
              üë• Ka√ß Ki≈üi?
            </label>
            <div className="text-center mb-3">
              <p className="text-blue-600 text-xs bg-blue-50 px-3 py-1 rounded-full inline-block">
                üë• Ki≈üi sayƒ±sƒ±nƒ± se√ßin, sonra a≈üaƒüƒ±daki tarih se√ßimine ge√ßin
              </p>
            </div>

            {/* √ñzel Tur Se√ßeneƒüi */}
            <div className="mb-4 text-center">
              <button
                onClick={() => {
                  setIsPrivateTour(!isPrivateTour);
                  if (!isPrivateTour) {
                    // √ñzel tur se√ßildi - 12 ki≈üi yap ve t√ºm koltuklarƒ± se√ß
                    handleGuestCountChange(12);
                    setSelectedSeats([...iskeleSeat, ...sancakSeat]);
                    // √ñzel tur i√ßin otomatik "G√ºn Boyu" saat ayarla
                    setSelectedTime('07:00-20:00');
                  } else {
                    // √ñzel tur iptal edildi - normal moda d√∂n
                    handleGuestCountChange(1);
                    setSelectedSeats([]);
                    setSelectedTime(''); // Saati temizle
                  }
                }}
                className={`px-6 py-3 rounded-xl font-bold text-sm transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105 ${
                  isPrivateTour
                    ? 'bg-gradient-to-r from-purple-500 to-indigo-600 text-white'
                    : 'bg-white/90 text-slate-800 border border-purple-300 hover:bg-purple-50'
                }`}
              >
                                 {isPrivateTour ? '‚≠ê √ñzel Tur Se√ßili' : '‚≠ê √ñzel Tur '}
              </button>
              
                             {isPrivateTour && (
                 <div className="mt-3 p-4 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl border border-purple-200 shadow-lg">
                   <div className="text-center">
                     <p className="text-sm font-bold text-purple-700 mb-2">üö§ √ñzel Tur Aktif</p>
                     <div className="space-y-2 text-xs text-slate-600">
                       <p>‚úÖ T√ºm tekne sizin grubunuz i√ßin ayrƒ±ldƒ±</p>
                       <p>‚úÖ 12 ki≈üiye kadar katƒ±lƒ±m</p>
                       <p>‚úÖ Oltalar ve ilk takƒ±mlar dahil</p>
                       <div className="mt-3 p-2 bg-orange-100 rounded-lg border border-orange-200">
                         <p className="text-orange-800 font-bold text-xs">
                           ‚ö†Ô∏è <strong>√ñnemli:</strong> Se√ßtiƒüiniz g√ºn√ºn tamamen bo≈ü olmasƒ± gereklidir!
                         </p>
                       </div>
                     </div>
                   </div>
                 </div>
               )}
            </div>

            {/* Normal Ki≈üi Sayƒ±sƒ± Se√ßimi (√ñzel tur deƒüilse) */}
            {!isPrivateTour && (
              <div className="flex items-center justify-center space-x-4">
                <button
                  onClick={() => {
                    const newCount = Math.max(1, guestCount - 1);
                    handleGuestCountChange(newCount);
                  }}
                  className="w-10 h-10 bg-gradient-to-br from-red-400 to-red-500 text-white rounded-full font-bold hover:scale-110 transition-all duration-300 shadow-lg"
                >
                  -
                </button>
                <div className="bg-white/90 px-6 py-3 rounded-full shadow-lg border border-blue-200">
                  <span className="text-2xl font-bold text-slate-800">{guestCount}</span>
                </div>
                <button
                  onClick={() => {
                    const newCount = Math.min(12, guestCount + 1);
                    handleGuestCountChange(newCount);
                  }}
                  className="w-10 h-10 bg-gradient-to-br from-green-400 to-green-500 text-white rounded-full font-bold hover:scale-110 transition-all duration-300 shadow-lg"
                >
                  +
                </button>
              </div>
            )}

            <p className="text-center text-xs text-slate-600 mt-2 bg-white/70 px-3 py-1 rounded-full inline-block">
              {isPrivateTour ? '‚≠ê √ñzel Tur - T√ºm Tekne' : `Maksimum 12 ki≈üi ‚Ä¢ ${selectedSeats.length}/${guestCount} koltuk se√ßildi`}
            </p>
          </div>

          {/* Tarih Se√ßimi - Modern Takvim */}
          <div ref={tarihRef} className="mb-6">
            <label className="block text-sm font-bold text-slate-800 mb-2 bg-white/80 px-3 py-1 rounded-full inline-block">
              üìÖ Tarih Se√ßin
            </label>
            <div className="text-center mb-4">
              {isPrivateTour ? (
                <div className="space-y-2">
                  <p className="text-purple-600 text-xs bg-purple-50 px-3 py-1 rounded-full inline-block">
                    ‚≠ê √ñzel Tur i√ßin tarih se√ßimi
                  </p>
                  <div className="bg-orange-50 border border-orange-200 rounded-xl p-3 text-center">
                    <p className="text-orange-800 text-xs font-bold">
                      ‚ö†Ô∏è <strong>√ñzel Tur Ko≈üulu:</strong> Se√ßtiƒüiniz g√ºn√ºn tamamen bo≈ü olmasƒ± gereklidir.<br/>
                      Ba≈üka rezervasyonlarƒ±n olduƒüu g√ºnlerde √∂zel tur yapƒ±lamaz.
                    </p>
                  </div>
                </div>
              ) : (
                <p className="text-green-600 text-xs bg-green-50 px-3 py-1 rounded-full inline-block">
                  üìÖ Tarih se√ßtikten sonra otomatik olarak saat se√ßimine ge√ßeceƒüiz
                </p>
              )}
            </div>
            
            <div className="bg-white/90 rounded-2xl shadow-lg border border-blue-200 p-4">
              {/* Takvim Ba≈ülƒ±ƒüƒ± */}
              <div className="flex items-center justify-between mb-4">
                <button
                  onClick={prevMonth}
                  className="w-8 h-8 rounded-full bg-blue-100 hover:bg-blue-200 flex items-center justify-center transition-all duration-300"
                >
                  <span className="text-blue-600 font-bold">‚Äπ</span>
                </button>
                
                <h4 className="text-lg font-bold text-slate-800">
                  {currentMonth.toLocaleDateString('tr-TR', { month: 'long', year: 'numeric' })}
                </h4>
                
                <button
                  onClick={nextMonth}
                  className="w-8 h-8 rounded-full bg-blue-100 hover:bg-blue-200 flex items-center justify-center transition-all duration-300"
                >
                  <span className="text-blue-600 font-bold">‚Ä∫</span>
                </button>
              </div>

              {/* Hafta G√ºnleri */}
              <div className="grid grid-cols-7 gap-1 mb-2">
                {['Pzt', 'Sal', '√áar', 'Per', 'Cum', 'Cmt', 'Paz'].map((day) => (
                  <div key={day} className="text-center py-2">
                    <span className="text-xs font-bold text-slate-600">{day}</span>
                  </div>
                ))}
              </div>

              {/* Takvim G√ºnleri */}
              <div className="grid grid-cols-7 gap-1">
                {calendarDays.map((dayInfo, index) => {
                  const occupancy = getDayOccupancy(dayInfo.date);
                  const dayColorClass = getDayColor(dayInfo.date, dayInfo.isCurrentMonth, dayInfo.isDisabled);
                  
                  return (
                    <button
                      key={index}
                      onClick={() => {
                        if (!dayInfo.isDisabled) {
                          setSelectedDate(dayInfo.date);
                        }
                      }}
                      disabled={dayInfo.isDisabled}
                      className={`
                        aspect-square rounded-lg text-sm font-bold transition-all duration-300 relative
                        ${dayInfo.isDisabled 
                          ? 'text-gray-300 cursor-not-allowed' 
                          : 'hover:scale-110 hover:shadow-lg cursor-pointer'
                        }
                        ${selectedDate === dayInfo.date
                          ? 'bg-gradient-to-br from-green-400 to-green-600 text-white shadow-xl scale-110'
                          : dayInfo.isToday
                          ? 'bg-blue-100 text-blue-600 ring-2 ring-blue-400'
                          : dayInfo.isCurrentMonth && !dayInfo.isDisabled
                          ? `${dayColorClass} border border-gray-200 hover:border-green-300`
                          : 'text-gray-400'
                        }
                      `}
                      title={
                        dayInfo.isCurrentMonth && !dayInfo.isDisabled && occupancy.total > 0
                          ? `${occupancy.total}/24 koltuk dolu (Sabah: ${occupancy.morning}/12, √ñƒüleden sonra: ${occupancy.afternoon}/12)`
                          : undefined
                      }
                    >
                      <span className="relative z-10">{dayInfo.day}</span>
                      
                      {/* Doluluk g√∂stergesi */}
                      {dayInfo.isCurrentMonth && !dayInfo.isDisabled && occupancy.total > 0 && selectedDate !== dayInfo.date && (
                        <div className="absolute bottom-0.5 left-1/2 transform -translate-x-1/2 flex space-x-0.5">
                          {/* Sabah g√∂stergesi */}
                          {occupancy.morning > 0 && (
                            <div className={`w-1 h-1 rounded-full ${
                              occupancy.morning >= 12 ? 'bg-red-500' : 
                              occupancy.morning >= 6 ? 'bg-orange-500' : 'bg-yellow-500'
                            }`}></div>
                          )}
                          {/* √ñƒüleden sonra g√∂stergesi */}
                          {occupancy.afternoon > 0 && (
                            <div className={`w-1 h-1 rounded-full ${
                              occupancy.afternoon >= 12 ? 'bg-red-500' : 
                              occupancy.afternoon >= 6 ? 'bg-orange-500' : 'bg-yellow-500'
                            }`}></div>
                          )}
                        </div>
                      )}
                      
                      {/* Bug√ºn g√∂stergesi */}
                      {dayInfo.isToday && selectedDate !== dayInfo.date && (
                        <div className="absolute top-0.5 right-0.5 w-1.5 h-1.5 bg-blue-500 rounded-full"></div>
                      )}
                    </button>
                  );
                })}
              </div>

              {/* Doluluk G√∂stergesi A√ßƒ±klamasƒ± */}
              <div className="mt-4 text-center">
                <div className="flex justify-center space-x-2 text-xs mb-3 flex-wrap gap-2">
                  <div className="flex items-center space-x-1 bg-white px-2 py-1 rounded-full shadow-sm border">
                    <div className="w-2 h-2 bg-yellow-500 rounded-full"></div>
                    <span className="text-slate-700">Az dolu</span>
                  </div>
                  <div className="flex items-center space-x-1 bg-white px-2 py-1 rounded-full shadow-sm border">
                    <div className="w-2 h-2 bg-orange-500 rounded-full"></div>
                    <span className="text-slate-700">Yarƒ± dolu</span>
                  </div>
                  <div className="flex items-center space-x-1 bg-white px-2 py-1 rounded-full shadow-sm border">
                    <div className="w-2 h-2 bg-red-500 rounded-full"></div>
                    <span className="text-slate-700">Tam dolu</span>
                  </div>
                </div>
              </div>

              {/* Se√ßili Tarih Bilgisi */}
              {selectedDate && (
                <div className="mt-2 text-center">
                  <div className="bg-green-50 border border-green-200 rounded-xl p-3 inline-block">
                    <span className="text-green-800 font-bold text-sm">
                      ‚úÖ Se√ßili: {new Date(selectedDate).toLocaleDateString('tr-TR', { 
                        weekday: 'long', 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric' 
                      })}
                    </span>
                    {/* Se√ßili g√ºn√ºn doluluk bilgisi */}
                    {(() => {
                      const dayOccupancy = getDayOccupancy(selectedDate);
                      if (dayOccupancy.total > 0) {
                        return (
                          <div className="text-green-700 text-xs mt-1">
                            üìä Doluluk: {dayOccupancy.total}/24 koltuk (Sabah: {dayOccupancy.morning}/12, √ñƒüleden sonra: {dayOccupancy.afternoon}/12)
                          </div>
                        );
                      }
                      return null;
                    })()}
                  </div>
                </div>
              )}
            </div>
          </div>
        </div>

        {/* Saat Se√ßimi - Sadece normal rezervasyonlar i√ßin */}
        {!isPrivateTour && (
          <div ref={saatRef} className="glass-card p-6 mb-6 hover-lift">
            <h3 className="text-lg font-bold mb-2 text-center">
              <span className="bg-white/90 px-4 py-2 rounded-full shadow-lg text-slate-800">
                üïê Saat Se√ßin
              </span>
            </h3>
            <div className="text-center mb-4">
              <p className="text-orange-600 text-xs bg-orange-50 px-3 py-1 rounded-full inline-block">
                üïê Saat se√ßtikten sonra otomatik olarak koltuk se√ßimine ge√ßeceƒüiz
              </p>
            </div>
            <div className="flex justify-center gap-4 flex-wrap">
              {availableTimes.map((time) => (
                <button
                  key={time}
                  onClick={() => setSelectedTime(time)}
                  className={`px-6 py-3 rounded-xl text-center font-bold transition-all duration-300 min-w-[140px] ${
                    selectedTime === time
                      ? 'bg-gradient-to-br from-green-400 to-green-600 text-white shadow-xl scale-105'
                      : 'bg-white/80 hover:bg-white/90 text-slate-800 shadow-lg hover:scale-105'
                  }`}
                >
                  {time}
                </button>
              ))}
            </div>
          </div>
        )}

        {/* √ñzel Tur Bilgilendirmesi */}
        {isPrivateTour && (
          <div ref={saatRef} className="glass-card p-6 mb-6 hover-lift">
            <h3 className="text-lg font-bold mb-4 text-center">
              <span className="bg-white/90 px-4 py-2 rounded-full shadow-lg text-slate-800">
                ‚≠ê √ñzel Tur - G√ºn Boyu Kiralama
              </span>
            </h3>
            <div className="bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl p-6 border border-purple-200">
              <div className="text-center space-y-3">
                <div className="w-16 h-16 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full flex items-center justify-center mx-auto">
                  <span className="text-2xl text-white">üö§</span>
                </div>
                <h4 className="text-lg font-bold text-purple-800">G√ºn Boyu √ñzel Tekne Kiralama</h4>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-purple-700">
                  <div className="flex items-center space-x-2">
                    <span className="text-green-600">‚úÖ</span>
                    <span>Sabah 07:00 - Ak≈üam 20:00</span>
                  </div>
                  <div className="flex items-center space-x-2">
                    <span className="text-green-600">‚úÖ</span>
                    <span>T√ºm tekne sadece sizin grubunuz i√ßin</span>
                  </div>
                  <div className="flex items-center space-x-2">
                    <span className="text-green-600">‚úÖ</span>
                    <span>12 ki≈üiye kadar katƒ±lƒ±m</span>
                  </div>
                  <div className="flex items-center space-x-2">
                    <span className="text-green-600">‚úÖ</span>
                    <span>Oltalar ve takƒ±mlar dahil</span>
                  </div>
                </div>
                <div className="bg-orange-100 border border-orange-200 rounded-lg p-3 mt-4">
                  <p className="text-orange-800 text-sm font-bold">
                    ‚ö†Ô∏è <strong>√ñnemli:</strong> Se√ßtiƒüiniz g√ºn√ºn tamamen bo≈ü olmasƒ± gereklidir!
                  </p>
                </div>
              </div>
            </div>
          </div>
        )}

        {/* Tekne Krokisi */}
        <div ref={koltukRef} className="glass-card p-6 mb-6 hover-lift">
          <h3 className="text-lg font-bold mb-2 text-center">
            <span className="bg-white/90 px-4 py-2 rounded-full shadow-lg text-slate-800">
              ‚öì Tekne Krokisi & Koltuk Se√ßimi
            </span>
          </h3>
          <div className="text-center mb-4">
            <p className="text-purple-600 text-xs bg-purple-50 px-3 py-1 rounded-full inline-block">
              ü™ë Koltuklarƒ± se√ßtikten sonra otomatik olarak rezervasyon √∂zetine ge√ßeceƒüiz
            </p>
          </div>
          
          {/* Koltuk Se√ßim Bilgilendirmesi */}
          <div className="mb-6 text-center space-y-3">
            {isPrivateTour ? (
              <div className="bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-xl p-4 inline-block">
                <div className="flex items-center justify-center space-x-2 mb-2">
                  <div className="w-8 h-8 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full flex items-center justify-center">
                    <span className="text-white text-sm">‚≠ê</span>
                  </div>
                  <p className="text-purple-800 text-lg font-bold">
                    √ñzel Tur Aktif
                  </p>
                </div>
                <p className="text-purple-700 text-sm">
                  üö§ T√ºm tekne sadece sizin grubunuz i√ßin ayrƒ±ldƒ±
                </p>
                <p className="text-purple-600 text-xs mt-1">
                  Koltuk se√ßimi otomatik olarak tamamlandƒ±
                </p>
              </div>
            ) : (
              <div className="bg-blue-50/90 border border-blue-200 rounded-xl p-3 inline-block">
                <p className="text-blue-800 text-sm font-medium">
                  üí° <strong>{guestCount} ki≈üi</strong> i√ßin <strong>{guestCount} koltuk</strong> se√ßin
                </p>
                {selectedSeats.length < guestCount && (
                  <p className="text-blue-700 text-xs mt-1">
                    Hen√ºz {guestCount - selectedSeats.length} koltuk daha se√ßmelisiniz
                  </p>
                )}
                {selectedSeats.length === guestCount && (
                  <p className="text-green-700 text-xs mt-1">
                    ‚úÖ T√ºm koltuklar se√ßildi!
                  </p>
                )}
              </div>
            )}

            {/* Real-time Doluluk Bilgisi - Sadece normal rezervasyonlar i√ßin */}
            {selectedDate && selectedTime && !isPrivateTour && (
              <div className="bg-blue-50/90 border border-blue-200 rounded-xl p-3 inline-block">
                <p className="text-blue-800 text-xs font-medium mb-1">
                  üîÑ <strong>Se√ßili Saat Dilimi:</strong> {selectedTime}
                </p>
                <div className="flex items-center space-x-2">
                  <div className={`w-3 h-3 rounded-full ${occupiedSeats.length === 0 ? 'bg-green-500' : occupiedSeats.length >= 10 ? 'bg-red-500' : 'bg-orange-500'}`}></div>
                  <p className="text-blue-800 text-xs font-medium">
                    <strong>Doluluk:</strong> {occupiedSeats.length}/12 koltuk dolu
                  </p>
                </div>
                {occupiedSeats.length > 0 && (
                  <p className="text-blue-700 text-xs mt-1">
                    Dolu koltuklar: {occupiedSeats.sort().join(', ')}
                  </p>
                )}
                {occupiedSeats.length === 0 && (
                  <p className="text-green-700 text-xs mt-1">
                    ‚úÖ T√ºm koltuklar m√ºsait!
                  </p>
                )}
                {occupiedSeats.length >= 12 && (
                  <p className="text-red-700 text-xs mt-1">
                    ‚ùå Bu saat dilimi tamamen dolu!
                  </p>
                )}
                {/* Debug bilgisi - sadece development ortamƒ±nda */}
                {process.env.NODE_ENV === 'development' && (
                  <p className="text-purple-600 text-xs mt-1 border-t pt-1">
                    üêõ Debug: [{occupiedSeats.join(', ')}] - Son g√ºncelleme: {new Date().toLocaleTimeString('tr-TR')}
                  </p>
                )}
              </div>
            )}

            {/* √ñzel Tur Bilgilendirmesi */}
            {isPrivateTour && selectedDate && (
              <div className="bg-purple-50/90 border border-purple-200 rounded-xl p-3 inline-block">
                <p className="text-purple-800 text-xs font-medium mb-1">
                  ‚≠ê <strong>√ñzel Tur:</strong> G√ºn Boyu (07:00-20:00)
                </p>
                <div className="flex items-center space-x-2">
                  <div className="w-3 h-3 rounded-full bg-purple-500"></div>
                  <p className="text-purple-800 text-xs font-medium">
                    üö§ T√ºm tekne sizin grubunuz i√ßin ayrƒ±ldƒ±
                  </p>
                </div>
                <p className="text-purple-700 text-xs mt-1">
                  ‚úÖ 12 koltuk da otomatik olarak se√ßilmi≈ütir
                </p>
              </div>
            )}
          </div>
          
          <div className="relative max-w-md mx-auto">
            {/* BA≈û - √ú√ßgen Kƒ±sƒ±m */}
            <div className="relative">
              {/* Ba≈ü Label */}
              <div className="text-center mb-3">
                <span className="text-sm font-bold text-slate-800 bg-white/95 px-4 py-2 rounded-full shadow-xl border border-slate-300">‚öì BA≈û</span>
              </div>
              
              {/* √ú√ßgen ≈ûekil */}
              <div 
                className="relative mx-auto w-40 h-28 bg-gradient-to-b from-slate-200 via-slate-300 to-slate-400 shadow-2xl border-2 border-slate-400"
                style={{
                  clipPath: 'polygon(50% 0%, 0% 100%, 100% 100%)'
                }}
              >
                {/* Ba≈ü b√∂l√ºm√º i√ßerik */}
                <div className="absolute bottom-3 left-1/2 transform -translate-x-1/2 flex space-x-3">
                  <div className="bg-white/90 p-2 rounded-full shadow-lg border border-slate-300">
                    <span className="text-xl">‚öì</span>
                  </div>
                  <div className="bg-white/90 p-2 rounded-full shadow-lg border border-slate-300">
                    <span className="text-lg">üöΩ</span>
                  </div>
                </div>
              </div>
            </div>

            {/* ANA G√ñVDE - Dikd√∂rtgen Kƒ±sƒ±m */}
            <div className="relative bg-gradient-to-b from-slate-200 via-slate-300 to-slate-400 w-40 mx-auto shadow-2xl rounded-b-2xl border-2 border-slate-400 border-t-0">
              {/* ƒ∞skele (Sol) Label */}
              <div className="absolute -left-20 top-1/2 transform -translate-y-1/2 -rotate-90">
                <span className="text-sm font-bold text-black bg-white/95 px-3 py-2 rounded-full shadow-xl border border-blue-600">üåä ƒ∞SKELE</span>
              </div>
              
              {/* Sancak (Saƒü) Label */}
              <div className="absolute -right-20 top-1/2 transform -translate-y-1/2 rotate-90">
                <span className="text-sm font-bold text-slate-800 bg-white/95 px-3 py-2 rounded-full shadow-xl border border-slate-300">üåä SANCAK</span>
              </div>

              {/* Koltuk D√ºzeni */}
              <div className="flex justify-between p-5">
                {/* ƒ∞skele Koltuklarƒ± (Sol) */}
                <div className="flex flex-col space-y-3">
                  {iskeleSeat.map(seatId => renderSeat(seatId))}
                </div>

                {/* Orta Koridor */}
                <div className="w-10 bg-gradient-to-b from-slate-400 via-slate-450 to-slate-500 rounded-lg shadow-inner border border-slate-500">
                  {/* Koridor detaylarƒ± */}
                  <div className="space-y-2 pt-4">
                    <div className="w-6 h-0.5 bg-slate-600 rounded-full mx-auto"></div>
                    <div className="w-4 h-0.5 bg-slate-600 rounded-full mx-auto"></div>
                    <div className="w-6 h-0.5 bg-slate-600 rounded-full mx-auto"></div>
                  </div>
                </div>

                {/* Sancak Koltuklarƒ± (Saƒü) */}
                <div className="flex flex-col space-y-3">
                  {sancakSeat.map(seatId => renderSeat(seatId))}
                </div>
              </div>
            </div>

            {/* KI√á */}
            <div className="text-center mt-3">
              <span className="text-sm font-bold text-slate-800 bg-white/95 px-4 py-2 rounded-full shadow-xl border border-slate-300">üö§ KI√á</span>
            </div>
          </div>

          {/* Koltuk Durumu A√ßƒ±klamalarƒ± - Sadece normal rezervasyonlar i√ßin */}
          {!isPrivateTour && (
            <div className="flex justify-center space-x-2 text-xs mt-6 flex-wrap gap-2">
              <div className="flex items-center space-x-1 bg-white/95 px-3 py-2 rounded-full shadow-lg border border-blue-200">
                <div className="w-4 h-4 bg-gradient-to-br from-blue-400 to-blue-600 rounded shadow-sm"></div>
                <span className="font-bold text-slate-800">Bo≈ü</span>
              </div>
              <div className="flex items-center space-x-1 bg-white/95 px-3 py-2 rounded-full shadow-lg border border-green-200">
                <div className="w-4 h-4 bg-gradient-to-br from-green-400 to-green-600 rounded shadow-sm"></div>
                <span className="font-bold text-slate-800">Se√ßili</span>
              </div>
              <div className="flex items-center space-x-1 bg-white/95 px-3 py-2 rounded-full shadow-lg border border-red-200">
                <div className="w-4 h-4 bg-red-500 rounded shadow-sm"></div>
                <span className="font-bold text-slate-800">Dolu</span>
              </div>
              <div className="flex items-center space-x-1 bg-white/95 px-2 py-1 rounded-full shadow-lg border border-purple-200">
                <div className="w-2 h-2 bg-purple-500 rounded-full animate-pulse"></div>
                <span className="font-bold text-purple-800 text-xs">üîÑ Canlƒ±</span>
              </div>
            </div>
          )}

          {selectedSeats.length > 0 && !isPrivateTour && (
            <div className="mt-4 p-3 bg-gradient-to-r from-green-100 to-emerald-100 rounded-xl border border-green-200 shadow-lg">
              <p className="text-green-800 font-bold text-center text-sm mb-2">
                ‚úÖ Se√ßili Koltuklar ({selectedSeats.length}/{guestCount})
              </p>
              <div className="flex flex-wrap justify-center gap-2">
                {selectedSeats.map((seat) => (
                  <span key={seat} className="bg-green-600 text-white px-2 py-1 rounded-full text-xs font-bold">
                    {seat}
                  </span>
                ))}
              </div>
              {selectedSeats.length < guestCount && (
                <p className="text-green-700 text-xs text-center mt-2">
                  {guestCount - selectedSeats.length} koltuk daha se√ßin
                </p>
              )}
            </div>
          )}

          {/* √ñzel Tur i√ßin basit onay */}
          {isPrivateTour && selectedSeats.length > 0 && (
            <div className="mt-4 p-3 bg-gradient-to-r from-purple-100 to-indigo-100 rounded-xl border border-purple-200 shadow-lg">
              <p className="text-purple-800 font-bold text-center text-sm">
                ‚≠ê √ñzel Tur - T√ºm koltuklar rezerve edildi
              </p>
              <p className="text-purple-700 text-xs text-center mt-1">
                12 koltuk (T√ºm Tekne) ‚Ä¢ G√ºn Boyu Kiralama
              </p>
            </div>
          )}
        </div>

        {/* Rezervasyon √ñzeti */}
        {!showPersonalInfoForm && (
          <div ref={ozetRef} className="glass-card p-6 mb-6 hover-lift">
            <h3 className="text-lg font-bold mb-4 text-center">
              <span className="bg-white/90 px-4 py-2 rounded-full shadow-lg text-slate-800">
                üéØ Rezervasyon √ñzeti
              </span>
            </h3>

            {/* Rezervasyon √ñzeti */}
            {isReservationComplete && (
              <div className="mb-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200 shadow-lg">
                <h4 className="font-bold text-slate-800 mb-2">üìã Se√ßimleriniz</h4>
                <div className="space-y-1 text-sm text-slate-700">
                  {isPrivateTour && (
                    <div className="bg-purple-100 px-3 py-2 rounded-lg text-purple-800 border border-purple-200">
                      <p className="font-bold text-sm mb-1">‚≠ê √ñzel Tur - T√ºm Tekne</p>
                      <div className="text-xs text-purple-700 space-y-1">
                        <p>‚úÖ 12 ki≈üiye kadar katƒ±lƒ±m</p>
                        <p>‚úÖ Oltalar ve takƒ±mlar dahil</p>
                        <p>üë§ Yetkili ki≈üi: {guestInfos[0]?.name} {guestInfos[0]?.surname}</p>
                        <p>‚ö†Ô∏è G√ºn tamamen bo≈ü olmalƒ±</p>
                      </div>
                    </div>
                  )}
                                      <p>üë• <strong>{guestCount} ki≈üi</strong></p>
                    <p>üìÖ <strong>{new Date(selectedDate).toLocaleDateString('tr-TR')}</strong></p>
                    <p>üïê <strong>{isPrivateTour ? 'G√ºn Boyu (07:00-20:00)' : selectedTime}</strong></p>
                  <p>ü™ë <strong>{isPrivateTour ? 'T√ºm koltuklar (√∂zel tur)' : selectedSeats.join(', ') + ' koltuklarƒ±'}</strong></p>
                  {isPrivateTour && (
                    <p className="text-purple-700 text-xs">
                      üé£ Oltalar ve ilk takƒ±mlar dahil
                    </p>
                  )}
                </div>
              </div>
            )}

            <button 
              onClick={() => {
                if (isReservationComplete) {
                  initializeGuestInfos();
                }
              }}
              className={`w-full py-4 rounded-xl font-bold text-sm transition-all duration-300 relative overflow-hidden ${
                isReservationComplete 
                  ? 'bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 text-white shadow-xl hover:shadow-2xl hover:scale-105 hover:from-orange-600 hover:via-red-600 hover:to-pink-600' 
                  : 'bg-gray-300 text-gray-500 cursor-not-allowed'
              }`}
              disabled={!isReservationComplete}
            >
              {isReservationComplete && (
                <div className="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12 animate-[buttonShimmer_2s_infinite]"></div>
              )}
              <span className="relative z-10">
                {isReservationComplete 
                  ? isPrivateTour 
                    ? 'üöÄ √ñzel Tur Rezervasyona Devam Et ‚Üí T√ºm Tekne'
                    : `üöÄ Rezervasyona Devam Et ‚Üí ${guestCount} Ki≈üi`
                  : 'üìù L√ºtfen T√ºm Bilgileri Doldurun'}
              </span>
            </button>
          </div>
        )}

        {/* Ki≈üi Bilgileri Formu - ARTIK HEMEN REZERVASYON √ñZETƒ∞'NDEN SONRA */}
        {showPersonalInfoForm && (
          <div className="glass-card p-6 mb-6 hover-lift">
            <h3 className="text-lg font-bold mb-6 text-center">
              <span className="bg-white/90 px-4 py-2 rounded-full shadow-lg text-slate-800">
                {isPrivateTour 
                  ? 'üë§ Yetkili Ki≈üi Bilgileri (Grup Lideri)' 
                  : `üë• Ki≈üi Bilgileri (${guestCount} Ki≈üi)`
                }
              </span>
            </h3>

            {/* √ñzel tur a√ßƒ±klamasƒ± */}
            {isPrivateTour && (
              <div className="mb-4 p-4 bg-purple-50 border border-purple-200 rounded-xl">
                <p className="text-purple-800 text-sm font-medium text-center">
                  ‚≠ê <strong>√ñzel Tur:</strong> Sadece grup lideri/yetkili ki≈üi bilgilerini girin. 
                  Bu ki≈üi t√ºm grup adƒ±na ileti≈üim kurulacak temsilci olacaktƒ±r.
                </p>
              </div>
            )}

            <div className="space-y-6">
              {guestInfos.map((guest, index) => (
                <div key={index} className="bg-white/90 rounded-xl p-4 border border-blue-200 shadow-lg">
                  <h4 className="font-bold text-slate-800 mb-3 text-center">
                    {isPrivateTour 
                      ? 'Grup Lideri / Yetkili Ki≈üi Bilgileri' 
                      : `${index + 1}. Ki≈üi Bilgileri`
                    }
                  </h4>
                  
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                    {/* ƒ∞sim */}
                    <div>
                      <label className="block text-xs font-bold text-slate-700 mb-1">Ad</label>
                      <input
                        type="text"
                        value={guest.name}
                        onChange={(e) => {
                          const newInfos = [...guestInfos];
                          newInfos[index].name = e.target.value;
                          setGuestInfos(newInfos);
                        }}
                        className="w-full px-3 py-2 rounded-lg border border-gray-300 text-sm text-slate-800 bg-white focus:ring-2 focus:ring-blue-400 focus:border-transparent"
                        placeholder="ƒ∞sim"
                      />
                    </div>

                    {/* Soyisim */}
                    <div>
                      <label className="block text-xs font-bold text-slate-700 mb-1">Soyad</label>
                      <input
                        type="text"
                        value={guest.surname}
                        onChange={(e) => {
                          const newInfos = [...guestInfos];
                          newInfos[index].surname = e.target.value;
                          setGuestInfos(newInfos);
                        }}
                        className="w-full px-3 py-2 rounded-lg border border-gray-300 text-sm text-slate-800 bg-white focus:ring-2 focus:ring-blue-400 focus:border-transparent"
                        placeholder="Soyisim"
                      />
                    </div>

                    {/* Cinsiyet */}
                    <div>
                      <label className="block text-xs font-bold text-slate-700 mb-1">Cinsiyet</label>
                      <select
                        value={guest.gender}
                        onChange={(e) => {
                          const newInfos = [...guestInfos];
                          newInfos[index].gender = e.target.value;
                          setGuestInfos(newInfos);
                        }}
                        className="w-full px-3 py-2 rounded-lg border border-gray-300 text-sm text-slate-800 bg-white focus:ring-2 focus:ring-blue-400 focus:border-transparent"
                      >
                        <option value="">Se√ßiniz</option>
                        <option value="erkek">Erkek</option>
                        <option value="kadƒ±n">Kadƒ±n</option>
                      </select>
                    </div>

                    {/* Ya≈ü */}
                    <div>
                      <label className="block text-xs font-bold text-slate-700 mb-1">Ya≈ü</label>
                      <input
                        type="number"
                        value={guest.age}
                        onChange={(e) => {
                          const newInfos = [...guestInfos];
                          newInfos[index].age = e.target.value;
                          setGuestInfos(newInfos);
                        }}
                        className="w-full px-3 py-2 rounded-lg border border-gray-300 text-sm text-slate-800 bg-white focus:ring-2 focus:ring-blue-400 focus:border-transparent"
                        placeholder="Ya≈ü"
                        min="1"
                        max="100"
                      />
                    </div>

                    {/* Telefon */}
                    <div className="md:col-span-2">
                      <label className="block text-xs font-bold text-slate-700 mb-1">Telefon</label>
                      <input
                        type="tel"
                        value={guest.phone}
                        onChange={(e) => {
                          const newInfos = [...guestInfos];
                          newInfos[index].phone = e.target.value;
                          setGuestInfos(newInfos);
                        }}
                        className="w-full px-3 py-2 rounded-lg border border-gray-300 text-sm text-slate-800 bg-white focus:ring-2 focus:ring-blue-400 focus:border-transparent"
                        placeholder="05XX XXX XX XX"
                      />
                    </div>
                  </div>
                </div>
              ))}
            </div>

            {/* Form Navigasyon */}
            <div className="flex gap-3 mt-6">
              <button
                onClick={() => setShowPersonalInfoForm(false)}
                className="flex-1 py-3 rounded-xl font-bold text-sm bg-gray-400 text-white hover:bg-gray-500 transition-all duration-300"
              >
                ‚Üê Geri D√∂n
              </button>
              
              <button
                onClick={() => {
                  if (isPersonalInfoComplete) {
                    saveReservation();
                  }
                }}
                disabled={!isPersonalInfoComplete || loading}
                className={`flex-1 py-3 rounded-xl font-bold text-sm transition-all duration-300 ${
                  isPersonalInfoComplete && !loading
                    ? 'bg-gradient-to-r from-green-500 via-green-600 to-emerald-600 text-white shadow-xl hover:shadow-2xl hover:scale-105 shimmer'
                    : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                }`}
              >
                {loading 
                  ? 'üíæ Kaydediliyor...'
                  : isPersonalInfoComplete 
                  ? isPrivateTour 
                    ? 'üéâ √ñzel Tur Rezervasyonunu Onayla' 
                    : 'üéâ Rezervasyonu Onayla'
                  : isPrivateTour
                  ? 'üìù Yetkili Ki≈üi Bilgilerini Doldurun'
                  : 'üìù Ki≈üi Bilgilerini Doldurun'}
              </button>
            </div>
          </div>
        )}

        {/* Hizmetler */}
        <div className="glass-card p-6 mb-6 hover-lift">
          <h3 className="text-lg font-bold mb-4 text-center">
            <span className="bg-white/90 px-4 py-2 rounded-full shadow-lg text-slate-800">
              üé£ Hizmetlerimiz
            </span>
          </h3>
          <div className="grid grid-cols-3 gap-4 text-center">
            <div className="p-3 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300">
              <div className="text-2xl mb-2">üé£</div>
              <p className="text-sm font-bold text-slate-700">Balƒ±k Turu</p>
            </div>
            <div className="p-3 bg-gradient-to-br from-cyan-100 to-cyan-200 rounded-xl shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300">
              <div className="text-2xl mb-2">üèä‚Äç‚ôÇÔ∏è</div>
              <p className="text-sm font-bold text-slate-700">Y√ºzme Turu</p>
            </div>
            <div className="p-3 bg-gradient-to-br from-red-100 to-red-200 rounded-xl shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300">
              <div className="text-2xl mb-2">üî•</div>
              <p className="text-sm font-bold text-slate-700">Mangal</p>
            </div>
          </div>
        </div>

        {/* ƒ∞leti≈üim */}
        <div className="glass-card p-6 mb-6 hover-lift">
          <h3 className="text-lg font-bold mb-4 text-center">
            <span className="bg-white/90 px-4 py-2 rounded-full shadow-lg text-slate-800">
              üìç ƒ∞leti≈üim Bilgileri
            </span>
          </h3>
          
          <div className="space-y-3">
            <div className="flex items-start space-x-3 bg-white/90 p-4 rounded-xl shadow-lg border border-blue-200">
              <span className="text-blue-600 text-lg">üìç</span>
              <div>
                <p className="font-bold text-slate-800 text-sm">Konum</p>
                <p className="text-slate-700 text-xs leading-relaxed">
                  Ey√ºp Odaba≈üƒ± Sporcular Parkƒ±<br />
                  Yenimahalle Mah. Yeni Mahalle Cd<br />
                  34450 Sarƒ±yer/ƒ∞stanbul
                </p>
              </div>
            </div>
            
            <div className="flex items-center space-x-3 bg-white/90 p-4 rounded-xl shadow-lg border border-green-200">
              <span className="text-green-600 text-lg">üìû</span>
              <div>
                <p className="font-bold text-slate-800 text-sm">ƒ∞leti≈üim</p>
                <a href="tel:05310892537" className="text-green-700 font-bold text-sm hover:text-green-800">
                  0531 089 25 37
                </a>
              </div>
            </div>
                      </div>
          </div>
        </section>

        {/* √ñdeme Modal'ƒ± */}
        {showPaymentModal && (
          <div className="fixed inset-0 bg-black/50 backdrop-blur-sm z-[60] flex items-center justify-center p-4">
            <div className="bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto">
              {/* Modal Header */}
              <div className="p-6 border-b border-gray-200">
                <div className="flex items-center justify-between">
                  <h3 className="text-xl font-bold text-slate-800">üí≥ √ñdeme Bilgileri</h3>
                  <button
                    onClick={() => setShowPaymentModal(false)}
                    className="w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-all duration-300"
                  >
                    <span className="text-gray-600 font-bold">√ó</span>
                  </button>
                </div>
                <p className="text-sm text-gray-600 mt-2">
                  Rezervasyonunuzu tamamlamak i√ßin √∂deme yapƒ±n
                </p>
              </div>

              {/* Modal Content */}
              <div className="p-6">
                {/* Rezervasyon √ñzeti */}
                <div className="mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200">
                  <h4 className="font-bold text-slate-800 mb-2">üìã Rezervasyon √ñzeti</h4>
                  <div className="space-y-1 text-sm text-slate-700">
                    {isPrivateTour && (
                      <div className="bg-purple-100 px-2 py-1 rounded-lg text-purple-800 font-bold mb-1">
                        <p>‚≠ê √ñzel Tur - T√ºm Tekne</p>
                        <p className="text-xs font-normal">üë§ Yetkili: {guestInfos[0]?.name} {guestInfos[0]?.surname}</p>
                      </div>
                    )}
                    <p>üë• <strong>{guestCount} ki≈üi{isPrivateTour ? ' (√ñzel Tur)' : ''}</strong></p>
                    <p>üìÖ <strong>{new Date(selectedDate).toLocaleDateString('tr-TR')}</strong></p>
                    <p>üïê <strong>{isPrivateTour ? 'G√ºn Boyu (07:00-20:00)' : selectedTime}</strong></p>
                    <p>ü™ë <strong>{isPrivateTour ? 'T√ºm koltuklar (√∂zel tur)' : selectedSeats.join(', ') + ' koltuklarƒ±'}</strong></p>
                  </div>
                </div>

                {/* Banka Bilgileri */}
                <div className="mb-6">
                  <h4 className="font-bold text-slate-800 mb-3 flex items-center">
                    üè¶ Banka Bilgileri
                  </h4>
                  
                  {/* Banka Adƒ± */}
                  <div className="mb-3 p-3 bg-gray-50 rounded-xl border border-gray-200">
                    <div className="flex items-center justify-between">
                      <div>
                        <p className="text-xs text-gray-600 mb-1">Banka</p>
                        <p className="font-bold text-slate-800">{bankInfo.bankName}</p>
                      </div>
                    </div>
                  </div>

                  {/* Hesap Sahibi */}
                  <div className="mb-3 p-3 bg-gray-50 rounded-xl border border-gray-200">
                    <div className="flex items-center justify-between">
                      <div className="flex-1">
                        <p className="text-xs text-gray-600 mb-1">Hesap Sahibi</p>
                        <p className="font-bold text-slate-800">{bankInfo.accountHolder}</p>
                      </div>
                      <button
                        onClick={() => copyToClipboard(bankInfo.accountHolder, 'Hesap sahibi')}
                        className="ml-2 p-2 bg-blue-100 hover:bg-blue-200 rounded-lg transition-all duration-300"
                        title="Hesap sahibini kopyala"
                      >
                        <svg className="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                        </svg>
                      </button>
                    </div>
                  </div>

                  {/* IBAN */}
                  <div className="mb-4 p-3 bg-yellow-50 rounded-xl border border-yellow-200">
                    <div className="flex items-center justify-between">
                      <div className="flex-1">
                        <p className="text-xs text-gray-600 mb-1">IBAN</p>
                        <p className="font-bold text-slate-800 font-mono text-lg">{bankInfo.iban}</p>
                      </div>
                      <button
                        onClick={() => copyToClipboard(bankInfo.iban.replace(/\s/g, ''), 'IBAN')}
                        className="ml-2 p-2 bg-yellow-200 hover:bg-yellow-300 rounded-lg transition-all duration-300"
                        title="IBAN'ƒ± kopyala"
                      >
                        <svg className="w-4 h-4 text-yellow-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                        </svg>
                      </button>
                    </div>
                  </div>

                  {/* Uyarƒ± */}
                  <div className="p-3 bg-orange-50 rounded-xl border border-orange-200">
                    <p className="text-sm text-orange-800">
                      <strong>‚ö†Ô∏è √ñnemli:</strong> √ñdeme a√ßƒ±klamasƒ±na <strong>"{new Date(selectedDate).toLocaleDateString('tr-TR')} - {isPrivateTour ? '√ñzel Tur' : guestCount + ' Ki≈üi'}"</strong> yazƒ±nƒ±z.
                    </p>
                  </div>
                </div>

                {/* √ñdeme Yaptƒ±m Butonu */}
                <button
                  onClick={() => {
                    setPaymentCompleted(true);
                    setShowPaymentModal(false);
                    setReservationConfirmed(true);
                  }}
                  className="w-full py-4 bg-gradient-to-r from-green-500 via-green-600 to-emerald-600 text-white rounded-xl font-bold text-lg hover:from-green-600 hover:via-green-700 hover:to-emerald-700 active:scale-95 shadow-xl hover:shadow-2xl transition-all duration-300 shimmer"
                >
                  ‚úÖ √ñdemeyi Yaptƒ±m
                </button>

                <p className="text-center text-xs text-gray-600 mt-3">
                  √ñdeme yaptƒ±ktan sonra bu butona tƒ±klayƒ±n
                </p>
              </div>
            </div>
          </div>
        )}

        {/* Onay A≈üamasƒ± Modal'ƒ± */}
        {reservationConfirmed && (
          <div className="fixed inset-0 bg-black/50 backdrop-blur-sm z-[70] flex items-center justify-center p-4">
            <div className="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 text-center">
              <div className="mb-4">
                <div className="w-16 h-16 bg-gradient-to-r from-blue-500 to-green-500 rounded-full flex items-center justify-center mx-auto mb-4">
                  <span className="text-2xl text-white">‚è≥</span>
                </div>
                <h3 className="text-xl font-bold text-slate-800 mb-2">
                  Rezervasyonunuz Onay A≈üamasƒ±nda
                </h3>
                <p className="text-gray-600 text-sm leading-relaxed">
                  √ñdemeniz alƒ±ndƒ±ktan sonra rezervasyonunuz onaylanacak ve WhatsApp √ºzerinden bilgilendirileceksiniz.
                </p>
              </div>

              <div className="space-y-3">
                <div className="p-3 bg-blue-50 rounded-xl border border-blue-200">
                  <h4 className="font-bold text-blue-800 text-sm mb-1">üì± ƒ∞leti≈üim</h4>
                  <p className="text-blue-700 text-xs">
                    Sorularƒ±nƒ±z i√ßin: <strong>0531 089 25 37</strong>
                  </p>
                </div>

                <button
                  onClick={() => {
                    setReservationConfirmed(false);
                    setShowPersonalInfoForm(false);
                    // Formu sƒ±fƒ±rla
                    setSelectedSeats([]);
                    setSelectedDate('');
                    setSelectedTime('');
                    setGuestCount(1);
                    setIsPrivateTour(false);
                    setGuestInfos([]);
                    setPaymentCompleted(false);
                  }}
                  className="w-full py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl font-bold text-sm hover:from-blue-600 hover:to-indigo-700 active:scale-95 shadow-lg hover:shadow-xl transition-all duration-300"
                >
                  üè† Ana Sayfaya D√∂n
                </button>
              </div>
            </div>
          </div>
        )}
    </div>
  );
}
